import{_ as a}from"./plugin-vue_export-helper-c27b6911.js";import{o as n,c as s,e}from"./app-32c10327.js";const t={},i=e(`<h2 id="一-理解" tabindex="-1"><a class="header-anchor" href="#一-理解" aria-hidden="true">#</a> （一）理解</h2><table><thead><tr><th>报纸订阅与发布</th><th>消息订阅与发布</th></tr></thead><tbody><tr><td>订阅报纸：住址</td><td>订阅消息：消息名（手机号）</td></tr><tr><td>邮递员送报纸：报纸</td><td>发布消息：消息内容</td></tr></tbody></table><h2 id="二-定义" tabindex="-1"><a class="header-anchor" href="#二-定义" aria-hidden="true">#</a> （二）定义</h2><ul><li>一种组件间通信的方式</li><li>适用于 <strong>任意组件间通信</strong></li></ul><h2 id="三-使用步骤" tabindex="-1"><a class="header-anchor" href="#三-使用步骤" aria-hidden="true">#</a> （三）使用步骤</h2><h3 id="_1-安装-pubsub" tabindex="-1"><a class="header-anchor" href="#_1-安装-pubsub" aria-hidden="true">#</a> 1.安装 pubsub</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> i pubsub-js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_2-引入" tabindex="-1"><a class="header-anchor" href="#_2-引入" aria-hidden="true">#</a> 2.引入</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> pubsub <span class="token keyword">from</span> <span class="token string">&quot;pubsub-js&quot;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_3-接收数据" tabindex="-1"><a class="header-anchor" href="#_3-接收数据" aria-hidden="true">#</a> 3.接收数据</h3><ul><li>A 组件想接收数据，则在 A 组件中订阅消息</li><li>订阅的 <strong>回调留在 A 组件自身</strong></li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">methods</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">demo</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// ...</span>
<span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>pid <span class="token operator">=</span> pubsub<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>demo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//订阅消息</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-提供数据" tabindex="-1"><a class="header-anchor" href="#_4-提供数据" aria-hidden="true">#</a> 4.提供数据</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>pubsub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span> 数据<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_5-备注" tabindex="-1"><a class="header-anchor" href="#_5-备注" aria-hidden="true">#</a> 5.备注</h3><ul><li>最好在 beforeDestroy 钩子中，用 <code>Pubsub.unsubscribe(pid)</code> 去 <strong>取消订阅</strong></li></ul>`,16),c=[i];function p(o,u){return n(),s("div",null,c)}const r=a(t,[["render",p],["__file","33.html.vue"]]);export{r as default};
